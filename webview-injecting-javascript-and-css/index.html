<!DOCTYPE html>
<html>
  <head>
  </head>

  <body>
    <p>
       <span>Selector Assistant</span>
       <form>
          <input type="text" id="selectorForAssistant" />
       </form>
    </p>
    <webview id="webview" src="http://bigbinary-website-stagi-pr-705.herokuapp.com/san-francisco" style="position:absolute;width:100%;height:100%;" preload="./preload.js"></webview>
    <h1 class="indicator"></h1>
  </body>

   <script>
  onload = () => {
    const webview = document.querySelector('webview')
    const indicator = document.querySelector('.indicator')

    const loadstart = () => {
      indicator.innerText = 'loading...'
    }

    const loadstop = () => {
      indicator.innerText = ''
    }

    webview.addEventListener('did-start-loading', loadstart)
    webview.addEventListener('did-stop-loading', loadstop)

    webview.addEventListener('ipc-message', event => {
    document.getElementById('selectorForAssistant').value = event.channel;
    webview.send("from-webview", "this message is from webview");
  })

    webview.addEventListener('dom-ready', () => {
      webview.openDevTools()
    })

     webview.addEventListener('did-finish-load', () => {
       webview.insertCSS(".hintBox { background-color: yellow; }");
    })

  }
</script>

</html>

